<meta charset="UTF-8">
<!DOCTYPE html>
<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
		<link rel="stylesheet" type="text/css" href="messages.css">
	</head>
	<body ng-app="myApp"  ng-controller="myCtrl">
		<div class="toolbar">
			<div class="dropdown">
				<button class="dropbtn">Tasks</button>
				<div class="dropdown-content">
					<a href="#">Link 1</a>
					<a href="#">Link 2</a>
					<a href="#">Link 3</a>
				</div>
			</div>
			<div class="dropdown">
				<button class="dropbtn">Projects</button>
				<div class="dropdown-content">
					<a href="#">My projects</a>
					<a href="#">Create project</a>
				</div>
			</div>
			<div class="dropdown">
				<button class="dropbtn">Messages</button>
			</div>
			<div class="dropdown">
				<button class="news-btn">News Feed</button>
			</div>
			<div class="dropdown">
				<button class="dropbtn">Board</button>
			</div>
			<div class="dropdown settings">
				<img class="profile" src="icon.png"/>
				<div class="dropdown-content">
					<a href="#">Settings</a>
					<a href="#">Logout</a>
				</div>
			</div>
		</div>
		<div class="content">
			<div class="center-messenger">
				<div class = "messages">
					<div class="messages-content">
						<div class = "one-message">	
							<div class = "received">		<!-- received is on the left-->
								<div ng-repeat="user in myWelcome">
									{{ user.firstUser.name }} : {{user.firstUser.content}} 
									{{ user.secondUser.name }} : {{user.secondUser.content}} 
									
									</div>
							</div>
						</div>
						<div id="one-message">				<!-- sent is on the right-->
							<div class="sent">
								asd<br>
								asd
							</div>
						</div>
					</div>
				</div>
				
				<div class = "type-message">
					<div class="type-message-content">
						<div class="message-area">
							<textarea rows="4" cols="75" name="comment" form="usrform">
							</textarea>
						</div>
						<div class="button-send">
							<input type="submit" value="Send Message" name="sendmessage" onse>
						</div>
					</div>
				</div>
				
			</div>
			
		</div>
		
		<script>
			var app = angular.module('myApp', []);
			app.controller('myCtrl', function($scope, $http) {
			  $http({
				method : "GET",
				url : "http://message.azurewebsites.net/api/conversation/59eba87d7b5deb0d4cc48190"
			  }).then(function mySuccess(response) {
				  $scope.myWelcome = response.data; console.log(response.data);
				}, function myError(response) {
				  $scope.myWelcome = response.statusText;
				  $scope.reload();
				  $interval($scope.reload, 1000);
			  });
			});
			
		</script>
		
		
	</body>
</html>